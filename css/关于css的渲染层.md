### 90 css 的渲染层合成是什么 浏览器如何创建新的渲染层

> 在 DOM 树中每个节点都会对应一个渲染对象（`RenderObject），当它们的渲染对象处于相同的坐标空间（z 轴空间）时，就会形成一个 RenderLayers，也就是渲染层。渲染层将保证页面元素以正确的顺序堆叠，这时候就会出现层合成（`composite`），从而正确处理透明元素和重叠元素的显示。对于有位置重叠的元素的页面，这个过程尤其重要，因为一旦图层的合并顺序出错，将会导致元素显示异常

在 CSS 中，渲染层合成（Layer Composition）是浏览器中用于处理页面元素的显示和堆叠顺序的机制。它通过创建新的渲染层（Render Layer）来管理页面中的元素，并确保它们以正确的顺序进行渲染和呈现。

**浏览器创建新的渲染层的条件包括但不限于以下情况：**

1. **定位属性**：元素具有 `position: fixed`、`position: relative`、`position: sticky`、`position: absolute` 等定位属性时，会创建新的渲染层。
2. **透明度和混合模式**：元素的透明度设置小于 1（`opacity: 0.5`）或具有非 `normal` 的混合模式（`mix-blend-mode: multiply`）时，会创建新的渲染层。
3. **3D 变换**：元素具有 3D 变换（`transform: translateZ(0)`）时，会创建新的渲染层。
4. **滤镜效果**：元素应用了滤镜效果（`filter: blur(5px)`）时，会创建新的渲染层。
5. **遮罩效果**：元素应用了遮罩效果（`mask-image: url(mask.png)`）时，会创建新的渲染层。
6. **CSS 动画**：元素正在进行 CSS 动画（`animation`、`transition`）时，会创建新的渲染层。
7. **其他因素**：还有一些其他因素，如元素应用了 `backface-visibility: hidden`、`column-count` 不为 `auto` 等，也可能触发创建新的渲染层。

创建新的渲染层有助于确保页面元素以正确的顺序进行堆叠和渲染，并处理透明元素和重叠元素的显示。这对于具有位置重叠的页面元素尤为重要，因为合成层的顺序错误可能导致元素显示异常。通过创建新的渲染层，浏览器可以更好地管理元素的渲染和呈现，提高页面的性能和用户体验





渲染层和GPU硬件加速没有必然联系，硬件加速需要创建新的渲染层，但是创建新的渲染层不一定导致硬件加速